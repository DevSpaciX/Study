{% extends 'course/base.html' %}
{% block content %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <div class="grid grid-flow-col auto-cols-max-5">
    <div class="col-start-2 col-span-5 flex flex-wrap ">

      {% for homework in homeworks %}
        <div
            class="w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 m-5">
          <div class="flex flex-col items-center pb-10 mt-4">
            <img class="w-24 h-24 mb-3 rounded-full shadow-lg" src="{{ homework.student.image.url }}" alt=""/>
                        <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">{{ homework.student.username }}</h5>
            <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white"> Course: {{ homework.course.title }}</h5>
            <a class="underline dark:text-blue-500 hover:no-underline" href="{{ homework.homework }}">
            <span class="text-sm text-gray-500 dark:text-gray-400">Homework</span>

            </a>
            <div class="flex mt-4 space-x-3 md:mt-6">
              <form id="check-homework">
                {% csrf_token %}
                <input type="hidden" name="homework_pk" value="{{ homework.pk }}">
                <input type="hidden" name="lecture_pk" value="{{ homework.lecture.pk }}">
                <input type="hidden" name="student_pk" value="{{ homework.student.pk }}">
                <button  id="rejectButton" class="text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Reject</button>
              <button  id="acceptButton" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 shadow-lg shadow-green-500/50 dark:shadow-lg dark:shadow-green-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2">Accept</button>
            <input type="hidden" id="actionInput" name="action" value="">
              </form>
             </div>
          </div>
        </div>
        {% empty %}
        <div style="height: 71vh"> </div>

      {% endfor %}
    </div>
  </div>
  <script>
$(document).ready(function() {
  // Обработчик события клика на кнопке Reject
  $('#rejectButton').click(function() {
    // Устанавливаем значение скрытого инпута на 'reject'
    $('#actionInput').val('reject');
    console.log('Button "Reject" was clicked'); // Выводим информацию в консоль

    // Выполняем асинхронный POST-запрос на сервер
    $.ajax({
      type: 'POST',
      url: {% url "course:homework" %}, // Замените на правильный URL вашего сервера
      data: $('#check-homework').serialize(), // Сериализуем данные формы
      success: function(data) {
        // Обработка успешного ответа от сервера
        console.log('Data successfully sent:', data);
      },
      error: function(xhr, textStatus, errorThrown) {
        // Обработка ошибки при отправке запроса
        console.log('Error:', textStatus, errorThrown);
      }
    });
  });

  // Обработчик события клика на кнопке Accept
  $('#acceptButton').click(function() {
    // Устанавливаем значение скрытого инпута на 'accept'
    $('#actionInput').val('accept');
    console.log('Button "Accept" was clicked'); // Выводим информацию в консоль

    // Выполняем асинхронный POST-запрос на сервер
    $.ajax({
      type: 'POST',
      url: {% url "course:homework" %}, // Замените на правильный URL вашего сервера
      data: $('#check-homework').serialize(), // Сериализуем данные формы
      success: function(data) {
        // Обработка успешного ответа от сервера
        console.log('Data successfully sent:', data);
      },
      error: function(xhr, textStatus, errorThrown) {
        // Обработка ошибки при отправке запроса
        console.log('Error:', textStatus, errorThrown);
      }
    });
  });
});
  </script>
{% endblock %}